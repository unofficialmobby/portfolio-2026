---
const journeyStations = [
  { 
    period: "2013 - 2022", 
    title: "Allgemeine Hochschulreife", 
    location: "Carl-Orff-Gymnasium", 
    description: "Allgemeinbildung und Spezialisierung durch die Hochbegabtenförderung e.V. in Informatik." 
  },
  { 
    period: "2022 - 2027", 
    title: "Duales Verbundstudium Wirtschaftsinformatik B. Sc.", 
    location: "BMW AG & Hochschule München", 
    description: "Entwicklung eines Modells zur Berechnung des Volllastanteils für BMW Motorräder zur effizienteren Motorenauslegung, was die Zeit auf dem Prüfstand um mehr als 20% verkürzte." 
  },
  { 
    period: "Ab 2025", 
    title: "stv. Jugendleiter", 
    location: "Wasserwacht OG Lohhof", 
    description: "Entwicklung einer KI-Trainingsplanerstellungssoftware, die die Vorbereitungszeit der Trainer um zwei Drittel reduzierte und die Flexibilität drastisch erhöhte." 
  },
  { 
    period: "Ab 2026", 
    title: "muni",
    location: "Munich", 
    description: "coming sooner" 
  },
  { 
    period: "Ab 2027", 
    title: "M. Sc.", 
    location: "International", 
    description: "coming later" 
  }
];
---

<section id="journey-section">
  <div class="section-header">
    <span class="section-label">01 // MILESTONES</span>
    <h2 class="section-title">Mein Weg</h2>
  </div>
  <div class="timeline-container">
    <div id="timeline" class="timeline">
      {journeyStations.map(station => (
        <div class="station-card unified-card">
          <span class="period">{station.period}</span>
          <h3>{station.title}</h3>
          <p class="location">{station.location}</p>
          <p class="description">{station.description}</p>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  #journey-section {
    padding: var(--spacing-xlarge) 0;
    background-color: transparent;
    overflow: hidden;
  }

  .header {
    text-align: center;
    margin-bottom: var(--spacing-large);
  }

  h2 {
    font-size: 3rem;
  }

  .timeline-container {
    height: 500px;
    width: 100%;
    display: flex;
    align-items: center;
  }

  .timeline {
    display: flex;
    flex-wrap: nowrap;
    width: max-content;
    gap: var(--spacing-large);
    padding: 0 var(--spacing-xlarge);
  }

  .station-card {
    flex: 0 0 clamp(300px, 25vw, 400px);
  }

  .station-card:hover {
    transform: translateY(-10px);
    border-color: var(--color-accent);
  }
  
  .station-card .period { color: var(--color-accent); font-weight: bold; display: block; margin-bottom: var(--spacing-medium); }
  .station-card h3 { margin: 0 0 var(--spacing-small) 0; font-size: 1.5rem; color: var(--color-text-primary); }
  .station-card .location { margin: 0 0 var(--spacing-medium) 0; color: var(--color-text-secondary); font-style: italic; }
  .station-card .description { margin: 0; color: var(--color-text-secondary); }
</style>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  window.addEventListener('load', () => {
    const timeline = document.querySelector("#timeline");
    if (!timeline) return;

    const amountToScroll = timeline.scrollWidth - window.innerWidth;

    if (amountToScroll > 0) {
      gsap.to(timeline, {
        x: -amountToScroll,
        ease: "none",
        scrollTrigger: {
          trigger: "#journey-section",
          pin: true,
          scrub: 1,
          end: () => `+=${amountToScroll}`,
          invalidateOnRefresh: true,
        }
      });
    }
  });
</script>